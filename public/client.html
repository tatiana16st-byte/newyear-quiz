<div id="reg-screen">
    <input id="p-name" placeholder="Ваше имя">
    <div class="avatars" id="avatar-list"></div>
    <button onclick="join()">Играть</button>
</div>

<div id="game-screen" style="display:none">
    <img id="q-image" src="" style="width:100%; border-radius:10px;">
    <h2 id="q-text"></h2>
    <div id="btns"></div>
</div>

<script>
    const socket = io();
    let selectedAvatar = null;

    socket.on("gameState", (state) => {
        if (state.status === "REGISTRATION" && !selectedAvatar) {
            renderAvatars(state.gameMode);
        }
        if (state.status === "QUESTION") {
            showQuestion(state.question);
        }
    });

    function renderAvatars(mode) {
        const list = document.getElementById("avatar-list");
        list.innerHTML = "";
        const count = mode === "team" ? 4 : 8;
        const path = mode === "team" ? "teams/team" : "solo/avatar";
        
        for(let i=1; i<=count; i++) {
            const img = document.createElement("img");
            img.src = `/images/avatars/${path}${i}.png`;
            img.onclick = () => {
                document.querySelectorAll(".avatars img").forEach(el => el.style.border="none");
                img.style.border = "3px solid gold";
                selectedAvatar = img.src;
            };
            list.appendChild(img);
        }
    }

    function join() {
        const name = document.getElementById("p-name").value;
        if(name && selectedAvatar) {
            socket.emit("joinGame", { name, avatar: selectedAvatar });
        }
    }

    function showQuestion(q) {
        document.getElementById("reg-screen").style.display = "none";
        document.getElementById("game-screen").style.display = "block";
        document.getElementById("q-image").src = q.image; // Здесь подставляется /images/fatherfrost/question01.png
        document.getElementById("q-text").innerText = q.text;
        // Отрисовка кнопок A, B, C, D...
    }
</script>

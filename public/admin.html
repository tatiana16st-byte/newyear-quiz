<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>
<style>
body { font-family: Arial; text-align:center; }
button { margin:5px; padding:8px 15px; }
.rubrics button { margin:5px; }
</style>
</head>
<body>

<h2>üéÖ –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>

<div class="rubrics" id="rubrics"></div>
<div><button onclick="startGame()">–°—Ç–∞—Ä—Ç –∏–≥—Ä—ã</button></div>
<h3>–ò–≥—Ä–æ–∫–∏:</h3>
<pre id="players"></pre>

<script src="/socket.io/socket.io.js"></script>
<script src="/data/rubricsList.js"></script>
<script>
const socket = io();
const rubricsDiv = document.getElementById('rubrics');
const playersDiv = document.getElementById('players');
let selectedRubricId = null;

rubricsList.forEach(r=>{
  const btn = document.createElement('button');
  btn.textContent = r.rubricTitle;
  btn.onclick = ()=> {
    selectedRubricId = r.rubricId;
    rubricsDiv.querySelectorAll('button').forEach(b=>b.style.background='');
    btn.style.background = '#2ecc71';
  };
  rubricsDiv.appendChild(btn);
});

function startGame() {
  if (!selectedRubricId) { alert('–í—ã–±–µ—Ä–∏—Ç–µ —Ä—É–±—Ä–∏–∫—É'); return; }
  socket.emit('start_game', selectedRubricId);
}

socket.on('lobby_update', players=>{
  playersDiv.textContent = players.map((p,i)=>`${i+1}. ${p.name} (${p.avatar})`).join('\n');
});
</script>
</body>
</html>

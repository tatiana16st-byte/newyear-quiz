<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Админ панель</title>
</head>
<body>

<h2>Админ панель</h2>

<button id="startBtn">Старт игры</button>

<h3>Рубрики</h3>
<div id="rubrics"></div>

<h3>Игроки</h3>
<pre id="players">Ожидание игроков...</pre>

<script src="/socket.io/socket.io.js"></script>
<script>
const socket = io();

const playersBlock = document.getElementById('players');
const rubricsBlock = document.getElementById('rubrics');
const startBtn = document.getElementById('startBtn');

startBtn.onclick = () => {
  socket.emit('start_game');
};

socket.on('lobby_update', (players) => {
  playersBlock.textContent =
    'Игроков: ' + players.length + '\n' +
    players.map((p, i) => (i + 1) + '. ' + p.name).join('\n');
});

socket.on('rubrics_list', (rubrics) => {
  rubricsBlock.innerHTML = '';

  rubrics.forEach(r => {
    const btn = document.createElement('button');
    btn.textContent = r.title;
    btn.onclick = () => {
      socket.emit('select_rubric', r.id);
    };
    rubricsBlock.appendChild(btn);
  });
});
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</title>
  <script src="/socket.io/socket.io.js"></script>
  <style>
    body { font-family: Arial; padding: 20px; }
    button { padding: 10px 15px; margin: 5px; cursor: pointer; }
    .rubrics { margin-top: 20px; }
  </style>
</head>
<body>

<h1>–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h1>

<button id="startGame">‚ñ∂ –°—Ç–∞—Ä—Ç –∏–≥—Ä—ã</button>
<button id="resetGame">üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>

<p id="status"></p>

<div class="rubrics" id="rubrics"></div>

<script>
  const socket = io();
  const startBtn = document.getElementById("startGame");
  const resetBtn = document.getElementById("resetGame");
  const status = document.getElementById("status");
  const rubricsDiv = document.getElementById("rubrics");

  startBtn.onclick = () => {
    socket.emit("adminStart");
    status.textContent = "–ò–≥—Ä–∞ –∑–∞–ø—É—â–µ–Ω–∞. –í—ã–±–µ—Ä–∏—Ç–µ —Ä—É–±—Ä–∏–∫—É";
  };

  resetBtn.onclick = () => {
    socket.emit("adminReset");
    status.textContent = "–ò–≥—Ä–∞ —Å–±—Ä–æ—à–µ–Ω–∞";
    rubricsDiv.innerHTML = "";
  };

  socket.on("rubricsList", (rubrics) => {
    rubricsDiv.innerHTML = "";

    if (rubrics.length === 0) {
      status.textContent = "–í—Å–µ —Ä—É–±—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã";
      return;
    }

    rubrics.forEach(r => {
      const btn = document.createElement("button");
      btn.textContent = r.title;
      btn.onclick = () => {
        socket.emit("selectRubric", r.id);
        rubricsDiv.innerHTML = "";
      };
      rubricsDiv.appendChild(btn);
    });
  });

  socket.on("gameReset", () => {
    status.textContent = "–ò–≥—Ä–∞ —Å–±—Ä–æ—à–µ–Ω–∞. –ù–∞–∂–º–∏—Ç–µ ¬´–°—Ç–∞—Ä—Ç –∏–≥—Ä—ã¬ª";
    rubricsDiv.innerHTML = "";
  });
</script>

</body>
</html>
